Вот подробное методическое руководство для проведения семинара 04.02.2026. Оно включает пошаговые инструкции (Step-by-step) и персонализированные задания для каждого студента группы 9-ИС202 на основе ведомости распределения тем.

---

# МЕТОДИЧЕСКОЕ ПОСОБИЕ К СЕМИНАРУ (04.02.2026)
**Дисциплины:** ПМ.09 (Проектирование) и МДК.09.01 (Разработка).
**Тема:** «Поиск информации и работа с медиа-контентом».
**Цель:** Научить веб-приложение фильтровать данные по запросу пользователя и принимать файлы (изображения/документы) на сервер.

---

## ЧАСТЬ 1. ПОИСК И ФИЛЬТРАЦИЯ (13:20 – 14:50)
**Задача:** Добавить на страницу каталога (`index.php` или `catalog.php`) строку поиска и фильтры.

### Шаг 1. Создание формы поиска (HTML)
Вставьте этот код **перед** циклом вывода товаров/услуг.
*Обратите внимание:* Используем метод `GET`, чтобы параметры сохранялись в URL (можно скинуть ссылку другу).

```html
<!-- index.php -->
<div class="card mb-4 p-3 bg-light">
    <form action="index.php" method="GET" class="row g-3">
        <!-- Поле текстового поиска -->
        <div class="col-md-8">
            <input type="text" name="q" class="form-control" 
                   placeholder="Поиск по названию..." 
                   value="<?= htmlspecialchars($_GET['q'] ?? '') ?>">
        </div>
        
        <!-- Кнопка отправки -->
        <div class="col-md-4">
            <button type="submit" class="btn btn-primary w-100">Найти</button>
        </div>
        
        <!-- Ссылка для сброса фильтров -->
        <div class="col-12 text-end">
            <a href="index.php" class="text-muted text-decoration-none small">Сбросить фильтры</a>
        </div>
    </form>
</div>
```

### Шаг 2. Модификация SQL-запроса (PHP)
Измените логику выборки данных. Вместо простого `SELECT *` мы строим запрос динамически.

```php
// index.php (PHP блок сверху)

$sql = "SELECT * FROM products"; // Начало запроса
$params = []; // Массив для подстановки данных (защита от SQL-инъекций)
$where_clauses = []; // Сюда будем складывать условия

// 1. Проверяем, есть ли поисковый запрос
if (!empty($_GET['q'])) {
    $where_clauses[] = "title LIKE ?"; 
    $params[] = "%" . $_GET['q'] . "%"; // % означает "любой текст"
}

// 2. (Опционально) Фильтр по категории, если передан category_id
if (!empty($_GET['category_id'])) {
    $where_clauses[] = "category_id = ?";
    $params[] = $_GET['category_id'];
}

// 3. Склеиваем условия, если они есть
if (count($where_clauses) > 0) {
    $sql .= " WHERE " . implode(" AND ", $where_clauses);
}

// 4. Добавляем сортировку
$sql .= " ORDER BY id DESC";

// 5. Выполняем
$stmt = $pdo->prepare($sql);
$stmt->execute($params);
$items = $stmt->fetchAll();
```

---

## ЧАСТЬ 2. ЗАГРУЗКА ФАЙЛОВ (15:05 – 16:35)
**Задача:** Реализовать загрузку аватарок или фото товаров.

### Шаг 1. Подготовка Базы Данных (SQL)
Зайдите в phpMyAdmin и добавьте колонку для хранения пути к файлу.
*Пример SQL-запроса (выполнить во вкладке SQL):*
```sql
ALTER TABLE `users` ADD `avatar_url` VARCHAR(255) DEFAULT NULL;
-- Или для товаров:
-- ALTER TABLE `products` ADD `image_url` VARCHAR(255) DEFAULT NULL;
```

### Шаг 2. Форма загрузки (HTML)
**Критически важно:** Добавьте атрибут `enctype="multipart/form-data"`. Без него файлы не улетят на сервер!

```html
<!-- profile.php или add_item.php -->
<form action="upload.php" method="POST" enctype="multipart/form-data">
    <div class="mb-3">
        <label class="form-label">Выберите изображение:</label>
        <input type="file" name="file" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-success">Загрузить</button>
</form>
```

### Шаг 3. Скрипт-обработчик (upload.php)
Создайте файл `upload.php`. Он отвечает за безопасность и перемещение файла.

```php
<?php
session_start();
require 'db.php';

// Проверка авторизации
if (!isset($_SESSION['user_id'])) die('Доступ запрещен');

// Настройки
$uploadDir = 'uploads/'; // Папка, куда сохраняем (создайте её руками в Beget!)
$allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];

if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_FILES['file'])) {
    $file = $_FILES['file'];

    // 1. Проверка на ошибки загрузки
    if ($file['error'] !== UPLOAD_ERR_OK) {
        die("Ошибка загрузки кода: " . $file['error']);
    }

    // 2. Проверка типа файла (MIME-type)
    if (!in_array($file['type'], $allowedTypes)) {
        die("Ошибка: Можно загружать только картинки (JPG, PNG, GIF).");
    }

    // 3. Генерация безопасного имени (чтобы не перезатереть чужой файл)
    $extension = pathinfo($file['name'], PATHINFO_EXTENSION);
    $newName = uniqid('img_') . '.' . $extension;
    $destination = $uploadDir . $newName;

    // 4. Перемещение из временной папки в постоянную
    if (move_uploaded_file($file['tmp_name'], $destination)) {
        
        // 5. Сохраняем ПУТЬ в базу данных
        // ПРИМЕР ДЛЯ АВАТАРКИ:
        $stmt = $pdo->prepare("UPDATE users SET avatar_url = ? WHERE id = ?");
        $stmt->execute([$destination, $_SESSION['user_id']]);

        echo "Файл успешно загружен! <a href='profile.php'>Вернуться</a>";
    } else {
        echo "Не удалось сохранить файл.";
    }
}
?>
```

---

## ЧАСТЬ 3. ПЕРСОНАЛЬНЫЕ ЗАДАНИЯ (ДЛЯ ВСЕХ СТУДЕНТОВ)

Найдите свою фамилию и реализуйте указанный функционал.
*Легенда:* **[Поиск]** — что фильтруем на 1-й паре. **[Файл]** — что загружаем на 2-й паре.

### Группа 1: E-Commerce и Услуги
1.  **Вотинцев Александр (Магазин ПК):**
    *   **[Поиск]** Фильтр по производителю (Intel/AMD) через `<select>`.
    *   **[Файл]** Загрузка фото комплектующих в админке.
2.  **Мартынова Анна (Фермерские продукты):**
    *   **[Поиск]** Фильтр по типу продукта (Овощи/Мясо/Молоко).
    *   **[Файл]** Фото товара (картошка, молоко).
3.  **Савинкова Анна (Доставка еды):**
    *   **[Поиск]** Поиск блюда по ингредиентам (LIKE '%сыр%').
    *   **[Файл]** Фото блюда в меню.
4.  **Тонковид Анастасия (Рецепты):**
    *   **[Поиск]** Фильтр по калорийности (input type="number" max="500").
    *   **[Файл]** Фото готового блюда (результат).
5.  **Сердюкова Варвара (Барбершоп):**
    *   **[Поиск]** Поиск мастера по имени.
    *   **[Файл]** Портфолио мастера (фото стрижки).
6.  **Дмитриев Леонид (Автосервис):**
    *   **[Поиск]** Поиск услуги по названию.
    *   **[Файл]** Фото повреждения автомобиля (загружает клиент).
7.  **Устинова Анастасия (Barter/Обмен):**
    *   **[Поиск]** Поиск вещи по ключевым словам.
    *   **[Файл]** Фото вещи для обмена.
8.  **Орлова Светлана (Аренда инвентаря):**
    *   **[Поиск]** Фильтр: только свободный инвентарь (`WHERE status = 'available'`).
    *   **[Файл]** Фото велосипеда/лыж.

### Группа 2: Контент и Социальные проекты
9.  **Агапов Артемий (LMS Курсы):**
    *   **[Поиск]** Поиск курса по названию.
    *   **[Файл]** Загрузка ДЗ студентом (разрешить `.zip` и `.docx` в массиве `$allowedTypes`).
10. **Попова Дарья (Блог):**
    *   **[Поиск]** Поиск статей по тегам (хэштегам).
    *   **[Файл]** Обложка для статьи (Header Image).
11. **Барабашов Давид (Афиша):**
    *   **[Поиск]** Фильтр мероприятий по дате (`input type="date"`).
    *   **[Файл]** Постер/Афиша мероприятия.
12. **Великанов Дмитрий (Поиск животных):**
    *   **[Поиск]** Фильтр по породе или району.
    *   **[Файл]** Фото пропавшего питомца (Обязательно!).
13. **Шкода Ольга (Кинорейтинг):**
    *   **[Поиск]** Поиск фильма по актеру или режиссеру.
    *   **[Файл]** Постер фильма.

### Группа 3: Сложные системы и Учет
14. **Белозерцева Дарья (Фриланс):**
    *   **[Поиск]** Фильтр проектов по бюджету (От... До...).
    *   **[Файл]** ТЗ (Техническое задание) в формате PDF/DOCX.
15. **Постнова Юлия (HR/Кадры):**
    *   **[Поиск]** Поиск вакансии по должности.
    *   **[Файл]** Загрузка Резюме (CV) кандидатом (PDF).
16. **Рогова Дарья (Трекер задач):**
    *   **[Поиск]** Фильтр задач по срочности (High/Medium/Low).
    *   **[Файл]** Скриншот ошибки или макет к задаче.
17. **Янкулев Владислав (HelpDesk):**
    *   **[Поиск]** Поиск тикета по ID или теме.
    *   **[Файл]** Скриншот проблемы (прикрепление к заявке).
18. **Залуцкий Андрей (Склад WMS):**
    *   **[Поиск]** Поиск товара по артикулу (SKU).
    *   **[Файл]** Скан накладной (изображение документа).
19. **Ибрагимов Роман (Ветклиника CRM):**
    *   **[Поиск]** Поиск клиента по номеру телефона.
    *   **[Файл]** Рентген-снимок в карту пациента.
20. **Торшин Евгений (ТСЖ):**
    *   **[Поиск]** Фильтр показаний по году.
    *   **[Файл]** Фото счетчика (подтверждение показаний).
21. **Лещинский Макар (Инвентаризация):**
    *   **[Поиск]** Поиск оборудования по инвентарному номеру.
    *   **[Файл]** Фото оборудования.
22. **Кудрявцев Дмитрий (Бронь переговорных):**
    *   **[Поиск]** Фильтр комнат по вместимости (человек).
    *   **[Файл]** Схема проезда или фото комнаты.
23. **Маркварт Константин (Библиотека):**
    *   **[Поиск]** Поиск книги по ISBN или автору.
    *   **[Файл]** Обложка книги.
24. **Сенеджук Глеб (Недвижимость):**
    *   **[Поиск]** Фильтр квартир по количеству комнат.
    *   **[Файл]** Фотографии квартиры (галерея).
25. **Хайдуков Данила (Посещаемость):**
    *   **[Поиск]** Поиск студента по фамилии в журнале.
    *   **[Файл]** Скан справки о болезни (оправдательный документ).

---

## КРИТЕРИИ ОЦЕНКИ (04.02.2026)

1.  **3 балла:** Реализован простой поиск (форма GET + SQL LIKE).
2.  **4 балла:** Работает загрузка файлов (изображение появляется на сервере в папке `uploads` и путь прописывается в БД).
3.  **5 баллов:**
    *   Реализован **комбинированный фильтр** (например, Название + Категория).
    *   ИЛИ Реализована **валидация файлов** (проверка размера, типа, вывод ошибок пользователю).
    *   ИЛИ Реализовано **отображение заглушки**, если файл не загружен (default avatar).
